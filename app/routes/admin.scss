@use 'visually-hidden';

@layer reset, base, blocks, utilities;

@layer reset {
	*, ::before, ::after {
		box-sizing: border-box;
	}

	html {
		font-family: system-ui;
		color-scheme: dark light;
	}

	body, h1, h2, h3, h4, h5, h6, p, ul, ol {
		margin: 0;
	}

	:is(ul, ol):where([role="list"]) {
		list-style: none;
		padding-inline-start: 0;
	}
}

@layer base {
	html {
		block-size: 100%;
	}

	body {
		min-block-size: 100%;
		display: grid;
		align-content: start;

		@media screen and (min-width: 36rem) {
			align-content: unset;
			grid-auto-flow: column;
			grid-template-columns: max-content auto;
		}
	}

	header {
		padding-block: 1rem;
		padding-inline: 1rem 4rem;
		background-color: rgb(0 0 0 / 0.2);

		nav {
			display: grid;
			gap: 1em;

			ul {
				list-style: none;
				padding-inline-start: 0;
				margin-block: 0;
				display: grid;
				gap: inherit;
				grid-auto-flow: column;

				@media screen and (min-width: 36rem) {
					grid-auto-flow: row;
				}
			}
		}

	}

	main {
		block-size: 100%;
		padding: 1rem;
	}

	article-header {
		display: flex;
		align-items: baseline;
		gap: 1rem;
	}

	h1 {
		font-size: 2rem;
	}

	.skip-link {
		&:not(:focus) {
			@extend .visually-hidden;
		}

		&:focus {
			position: fixed;
			inset-block-start: 0;
			inset-inline-start: 0;
			background-color: Canvas;
			padding: 0.5em;
		}
	}

	form {
		display: grid;
		justify-items: start;
		row-gap: 1rem;

		label {
			font-weight: 500;
		}

		form-field {
			display: grid;
			justify-items: start;
			row-gap: 0.5rem;
			inline-size: 100%;
		}

		input:where(:not([type])) {
			font-size: inherit;
			padding: 0.5em;
		}

		textarea {
			padding: 0.5em;
			font: inherit;
		}
	}

	markdown-editor:defined {
		border: 1px solid CanvasText;
		padding: 1rem;
		display: block;
		resize: vertical;
		overflow-y: scroll;
		min-block-size: 10rem;
		block-size: 20rem;
		inline-size: min(100%, 40rem);

		> * + * {
			margin-block-start: 1rem;
		}
	}

	button {
		background-color: Canvas;
		border: 0.0625em solid CanvasText;
		border-radius: 0.375em;
		padding-block: 0.25em;
		padding-inline: 0.375em;
		font: inherit;
		transition-timing-function: ease;
		transition-duration: 0.3s;
		transition-property: color, background-color;

		&:hover {
			filter: brightness(0.7);
		}

		&[data-variant="primary"] {
			color: Canvas;
			background-color: CanvasText;
		}
	}
}

@layer blocks {
	.card {
		border-radius: 0.5em;
		padding: var(--size-3);
		border: 0.125em solid rgb(0 0 0 / 0.5);
		background-color: rgb(0 0 0 / 0.3);
	}

	.card-grid {
		display: grid;
		justify-content: start;
		grid-template-columns: repeat(auto-fill, minmax(16rem, 1fr));
		gap: 1rem;
		inline-size: min(100%, 64rem);
	}

	.flow > * + * {
		--_space: var(--space, var(--size-2));
		margin-block-start: var(--_space);
	}
}
